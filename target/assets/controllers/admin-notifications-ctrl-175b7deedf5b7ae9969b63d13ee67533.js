streamaApp.controller("adminNotificationsCtrl",["$scope","apiService","modalService","$state",function(a,c,d,e){a.loading=!0;c.notification.list().success(function(b){a.notifications=b;a.loading=!1});a.sendCurrentNotifcation=function(){alertify.set({buttonReverse:!0,labels:{ok:"Yes",cancel:"Cancel"}});alertify.confirm("Are you sure you want to send all of the open Notifications in the queue?",function(b){b&&c.notification.sendCurrentNotifcation().success(function(){_.forEach(a.notifications,function(a){a.isCompleted=
!0});alertify.success("The notification was sent for "+a.openNotificationAmount()+" entries.")}).error(function(a){alertify.error("There were no open notifications to send.")})})};a.openNotificationAmount=function(){console.log("%c open","color: deeppink; font-weight: bold; text-shadow: 0 0 5px deeppink;",_.filter(a.notifications,"isCompleted"));return _.reject(a.notifications,"isCompleted").length};a.openMovieModal=function(){d.movieModal(null,function(a){e.go("admin.movie",{movieId:a.id})})};a.delete=
function(b){alertify.set({buttonReverse:!0,labels:{ok:"Yes",cancel:"Cancel"}});alertify.confirm("Are you sure you want to delete this notification?",function(d){d&&c.notification.delete(b.id).success(function(c){_.remove(a.notifications,{id:b.id})})})}}]);