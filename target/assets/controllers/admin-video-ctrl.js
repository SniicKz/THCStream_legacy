streamaApp.controller("adminVideoCtrl",["$scope","apiService","$stateParams","modalService","$state","uploadService",function(a,c,b,f,g,h){a.loading=!0;c.genericVideo.get(b.videoId).success(function(d){a.video=d;a.loading=!1});a.openVideoModal=function(){f.genericVideoModal(a.video,function(d){angular.merge(a.video,d)})};a.delete=function(){alertify.set({buttonReverse:!0,labels:{ok:"Yes",cancel:"Cancel"}});alertify.confirm("Are you sure, you want to delete this Movie?",function(a){a&&c.movie.delete(b.movieId).success(function(){g.go("admin.movies")})})};
a.addToCurrentNotification=function(){c.notification.addMovieToCurrentNotification(b.movieId).success(function(){alertify.success("The movie was added to the current notification queue.")})};a.manageFiles=function(a){f.fileManagerModal(a)};a.addSimilarMovieToStreama=function(a,b){alertify.set({buttonReverse:!0,labels:{ok:"Yes",cancel:"Cancel"}});alertify.confirm('Do you want to add "'+a.title+'" to the Streama library?',function(e){e&&(e=a.id,delete a.id,a.apiId=e,c.movie.save(a).success(function(a){b&&
g.go("admin.movie",{movieId:a.id})}))})};a.uploadStatus={};a.upload=h.doUpload.bind(h,a.uploadStatus,"video/uploadFile.json?id="+b.movieId,function(b){a.uploadStatus.percentage=null;a.video.files=a.video.files||[];a.video.files.push(b)})}]);