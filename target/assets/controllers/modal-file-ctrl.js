streamaApp.controller("modalFileCtrl",["$scope","$uibModalInstance","apiService","uploadService","video",function(a,f,c,d,e){a.loading=!1;a.video=e;a.addExternalUrl=function(b){c.video.addExternalUrl({id:a.video.id,externalUrl:b}).success(function(b){alertify.success("External Url Added.");a.video.externalLink=null;_.find(a.video.files,{id:b.id})?a.video.files[_.indexOf(a.video.files,{id:b.id})]=b:(a.video.files=a.video.files||[],a.video.files.push(b))})};a.cancel=function(){f.dismiss("cancel")};
a.removeFile=function(b){alertify.set({buttonReverse:!0,labels:{ok:"Yes",cancel:"Cancel"}});alertify.confirm('Are you sure you want to remove the file "'+b.originalFilename+'"?',function(g){g&&c.video.removeFile(a.video.id,b.id).success(function(){".srt"==b.extension||".vtt"==b.extension?(_.remove(a.video.subtitles,{id:b.id}),alertify.success("Subtitles deleted.")):(_.remove(a.video.files,{id:b.id}),alertify.success("Video deleted."))})})};a.uploadStatus={};a.upload=d.doUpload.bind(d,a.uploadStatus,
"video/uploadFile.json?id="+e.id,function(b){a.uploadStatus.percentage=null;".srt"==b.extension||".vtt"==b.extension?(a.video.subtitles=a.video.subtitles||[],a.video.subtitles.push(b),alertify.success("Subtitles uploaded successfully.")):(a.video.files=a.video.files||[],a.video.files.push(b),alertify.success("Video uploaded successfully."))});a.getFilesForExtensions=function(b){return _.filter(a.video.files,function(a){return-1<b.indexOf(a.extension.toLowerCase())})}}]);