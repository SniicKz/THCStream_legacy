streamaApp.controller("modalMediaDetailCtrl",["$scope","$uibModalInstance","$rootScope","mediaId","$state","apiService","mediaType",function(b,d,h,f,c,e,g){console.log("%c media","color: deeppink; font-weight: bold; text-shadow: 0 0 5px deeppink;",f);e[g].get(f).success(function(a){b.media=a;"tvShow"==g&&(b.currentSeason=0,e.tvShow.episodesForTvShow(b.media.id).success(function(a){a.length&&(b.seasons=_.groupBy(a,"season_number"),b.currentSeason=_.min(a,"season_number").season_number)}),e.dash.firstEpisodeForShow(b.media.id).success(function(a){b.firstEpisode=
a}))});b.cancel=function(){d.dismiss("cancel");c.go("dash",{mediaModal:null,mediaType:null})};b.setCurrentSeason=function(a){b.currentSeason=a};b.editMedia=function(a){h.currentUser.isContentManager&&(console.log("%c media","color: deeppink; font-weight: bold; text-shadow: 0 0 5px deeppink;",a),a.isGenericVideo&&c.go("admin.video",{videoId:a.id}),a.title?c.go("admin.movie",{movieId:a.id}):a.name&&c.go("admin.show",{showId:a.id}),d.dismiss("cancel"))};b.$on("$stateChangeStart",function(){d.dismiss("cancel")})}]);