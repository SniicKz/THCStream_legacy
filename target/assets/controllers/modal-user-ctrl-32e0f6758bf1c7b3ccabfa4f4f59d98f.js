streamaApp.controller("modalUserCtrl",["$scope","$uibModalInstance","apiService","user",function(a,d,c,e){a.user=angular.copy(e);a.loading=!1;c.user.availableRoles().success(function(b){a.roles=b});a.cancel=function(){d.dismiss("cancel")};a.checkAvailability=function(b){a.error=null;a.valid=!1;b&&c.user.checkAvailability(b).success(function(b){b.error?a.error=b.error:a.valid=!0})};a.toggleSelection=function(b,a){-1<a.indexOf(b)?a.splice(a.indexOf(b),1):a.push(b)};a.saveAndInviteUser=function(b){a.loading=
!0;b=angular.copy(b);c.user.saveAndInviteUser(b).success(function(b){d.close(b);a.loading=!1}).error(function(){a.loading=!1;alertify.error("There was an error saving the user.")})}}]);